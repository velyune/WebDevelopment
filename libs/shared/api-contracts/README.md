# api-contracts

## Версионность пакетов

- ### package notary.anything.**v1alpha1** (Draft)
  - **Описание:** Допускаются любые изменения, может отсутствовать валидация данных, можно удалять поля, менять типы и переименовывать сервисы.
  - **Статус:** Не гарантирует стабильность.
- ### package notary.anything.**v1** (Stable)
  - **Описание:** Стабильность v1 проверяется через `buf breaking` (любой Breaking Change проваливает тесты в CI). Допускается добавление новых полей или методов.
  - **Статус:** Гарантирует полную обратную совместимость.

## Правила

- ### Путь к контракту должен строго зеркалить пакет:
  ### `/notary/common/v1/common.proto` -> `package notary.common.v1;`
- ### Название папки версии (`v1`, `v1alpha1`) должно совпадать с версией в названии пакета.
- ### В стабильных версиях (`v1`) запрещено изменять или переиспользовать номера полей. При удалении поля его номер и имя должны быть зарезервированы.

  **Пример: Необходимо удалить поле `email`:**

  ```proto
  message User {
    int32 id = 1;
    string email = 2;
    string phone = 3;
  }
  ```

  **Ошибка:**

  ```proto
  message User {
    int32 id = 1;
    string phone = 2;
  }
  ```

  **Верно:**

  ```proto
  message User {
    int32 id = 1;

    reserved 2;
    reserved "email";

    string phone = 3;
  }
  ```
